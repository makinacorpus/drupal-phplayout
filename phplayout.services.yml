services:

  php_layout.type_registry:
    class: MakinaCorpus\Layout\Type\ItemTypeRegistry

  php_layout.identifier_strategy:
    public: false
    class: MakinaCorpus\Layout\Render\DefaultIdentifierStrategy

  php_layout.grid_renderer:
    public: false
    class: MakinaCorpus\Layout\Render\BootstrapGridRenderer

  php_layout.renderer:
    class: MakinaCorpus\Layout\Render\Renderer
    arguments: ['@php_layout.type_registry', '@php_layout.grid_renderer', '@php_layout.identifier_strategy']

  php_layout.type.drupal_node:
    public: false
    class: MakinaCorpus\Drupal\Layout\Type\NodeType
    arguments: ['@entity.manager']
    tags: [{name: php_layout.type}]

  php_layout.storage:
    class: MakinaCorpus\Drupal\Layout\Storage\LayoutStorage
    arguments: ['@database', '@php_layout.type_registry']

  cache.layout:
    class: Drupal\Core\Cache\CacheBackendInterface
    factory: cache_factory:get
    arguments: [cache_layout]

(function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=21)})([function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e,t,o){var n=o(24)('wks'),a=o(12),r=o(0).Symbol,l='function'==typeof r,i=e.exports=function(e){return n[e]||(n[e]=l&&r[e]||(l?r:a)('Symbol.'+e))};i.store=n},function(e,t,o){var n=o(3);e.exports=function(e){if(!n(e))throw TypeError(e+' is not an object!');return e}},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,o){var n=o(5);e.exports=function(e,t,o){return(n(e),void 0===t)?e:1===o?function(o){return e.call(t,o)}:2===o?function(o,n){return e.call(t,o,n)}:3===o?function(o,n,a){return e.call(t,o,n,a)}:function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e){var t=e.exports={version:'2.5.1'};'number'==typeof __e&&(__e=t)},function(e,t,o){e.exports=!o(14)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,t,o){var n=o(2),a=o(26),r=o(27),l=Object.defineProperty;t.f=o(7)?Object.defineProperty:function(e,t,o){if(n(e),t=r(t,!0),n(o),a)try{return l(e,t,o)}catch(t){}if('get'in o||'set'in o)throw TypeError('Accessors not supported!');return'value'in o&&(e[t]=o.value),e}},function(e,t){'use strict';function o(e,t){var o=0;if(e.parentNode)for(var n,a=0,r=e.parentNode.childNodes;a<r.length;a++)if(n=r[a],n instanceof Element){if(e===n)break;n.hasAttribute(t)&&o++}return o}function n(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}function a(e){return o(e,'data-item-id')}function r(e){return o(e,'data-id')}function l(e){if(e.hasAttribute('data-token')||e.hasAttribute('data-layout-id')||e.hasAttribute('data-id'))return new p(e.getAttribute('data-id'),e.getAttribute('data-container'),e,e.getAttribute('data-token'),e.getAttribute('data-layout-id')||e.getAttribute('data-id'));throw'element is not a container, or is not initialized properly'}var i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,'__esModule',{value:!0}),t.getContainerCount=function(e){for(var t,o=0,n=0,a=e.childNodes;n<a.length;n++)t=a[n],t instanceof Element&&(t.hasAttribute('data-id')||t.hasAttribute('data-item-type'))&&o++;return o};var s;(function(e){e.Column='vbox',e.Horizontal='hbox',e.Layout='Layout'})(s=t.ContainerType||(t.ContainerType={})),t.getContainer=l,t.getItem=function(e){if(e.hasAttribute('data-item-id'))return new d(e.getAttribute('data-id')||e.getAttribute('data-item-id'),e.getAttribute('data-item-type')||'null',!e.hasAttribute('data-id'),e);throw'element is not an item'};var d=function(){function e(e,t,o,n){this.id=e,this.type=t,this.readonly=o,this.element=n}return e.prototype.getPosition=function(){return a(this.element)},e.prototype.toggleCollapse=function(){n(this.element,'collapsed')},e.prototype.findParentElement=function(){for(var e=this.element;e.parentElement;)if(e=e.parentElement,e.hasAttribute('data-id'))return e;throw'Parent has not identifier'},e.prototype.getParentContainer=function(){return l(this.findParentElement())},e.prototype.findParentId=function(){return this.findParentElement().getAttribute('data-id')||''},e.DefaultStyle='_default',e}();t.Item=d;var p=function(e){function t(t,o,n,a,r){var l=e.call(this,t,o,o===s.Horizontal,n)||this;return l.layoutId=r,l.token=a,l}return i(t,e),t.prototype.getPosition=function(){return r(this.element)},t}(d);t.Container=p},function(e,t,o){var n=o(8),a=o(1)('toStringTag'),r='Arguments'==n(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,o,i;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(o=l(t=Object(e),a))?o:r?n(t):'Object'==(i=n(t))&&'function'==typeof t.callee?'Arguments':i}},function(e){var t=0,o=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+o).toString(36))}},function(e,t,o){var n=o(9),a=o(28);e.exports=o(7)?function(e,t,o){return n.f(e,t,a(1,o))}:function(e,t,o){return e[t]=o,e}},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,o){var n=o(3),a=o(0).document,r=n(a)&&n(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},function(e,t,o){var n=o(0),a=o(13),r=o(17),l=o(12)('src'),i='toString',s=Function[i],d=(''+s).split(i);o(6).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,o,i){var s='function'==typeof o;s&&(r(o,'name')||a(o,'name',t));e[t]===o||(s&&(r(o,l)||a(o,l,e[t]?''+e[t]:d.join(t+''))),e===n?e[t]=o:i?e[t]?e[t]=o:a(e,t,o):(delete e[t],a(e,t,o)))})(Function.prototype,i,function(){return'function'==typeof this&&this[l]||s.call(this)})},function(e){var t={}.hasOwnProperty;e.exports=function(e,o){return t.call(e,o)}},function(e){e.exports={}},function(e,t,o){var n,a,r,l=o(4),i=o(37),s=o(38),d=o(15),p=o(0),u=p.process,c=p.setImmediate,m=p.clearImmediate,y=p.MessageChannel,h=p.Dispatch,v=0,_={},g='onreadystatechange',f=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},b=function(e){f.call(e.data)};c&&m||(c=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return _[++v]=function(){i('function'==typeof e?e:Function(e),t)},n(v),v},m=function(e){delete _[e]},'process'==o(8)(u)?n=function(e){u.nextTick(l(f,e,1))}:h&&h.now?n=function(e){h.now(l(f,e,1))}:y?(a=new y,r=a.port2,a.port1.onmessage=b,n=l(r.postMessage,r,1)):p.addEventListener&&'function'==typeof postMessage&&!p.importScripts?(n=function(e){p.postMessage(e+'','*')},p.addEventListener('message',b,!1)):g in d('script')?n=function(e){s.appendChild(d('script'))[g]=function(){s.removeChild(this),f.call(e)}}:n=function(e){setTimeout(l(f,e,1),0)}),e.exports={set:c,clear:m}},function(e,t,o){'use strict';function n(e){var t,o;this.promise=new e(function(e,n){if(t!=void 0||o!=void 0)throw TypeError('Bad Promise constructor');t=e,o=n}),this.resolve=a(t),this.reject=a(o)}var a=o(5);e.exports.f=function(e){return new n(e)}},function(e,t,o){o(22),e.exports=o(46)},function(e,t,o){'use strict';var n,a,r,l,i=o(23),s=o(0),d=o(4),p=o(11),u=o(25),c=o(3),m=o(5),y=o(29),h=o(30),v=o(36),_=o(19).set,g=o(39)(),f=o(20),b=o(40),C=o(41),x='Promise',E=s.TypeError,I=s.process,A=s[x],k='process'==p(I),S=function(){},P=a=f.f,T=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[o(1)('species')]=function(e){e(S,S)};return(k||'function'==typeof PromiseRejectionEvent)&&e.then(S)instanceof t}catch(t){}}(),R=function(e){var t;return c(e)&&'function'==typeof(t=e.then)&&t},L=function(e,t){if(!e._n){e._n=!0;var o=e._c;g(function(){for(var n=e._v,a=1==e._s,r=0,l=function(t){var o,r,l=a?t.ok:t.fail,i=t.resolve,s=t.reject,d=t.domain;try{l?(!a&&(2==e._h&&j(e),e._h=1),!0===l?o=n:(d&&d.enter(),o=l(n),d&&d.exit()),o===t.promise?s(E('Promise-chain cycle')):(r=R(o))?r.call(o,i,s):i(o)):s(n)}catch(t){s(t)}};o.length>r;)l(o[r++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){_.call(s,function(){var t,o,n,a=e._v,r=O(e);if(r&&(t=b(function(){k?I.emit('unhandledRejection',a,e):(o=s.onunhandledrejection)?o({promise:e,reason:a}):(n=s.console)&&n.error&&n.error('Unhandled promise rejection',a)}),e._h=k||O(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},O=function(e){if(1==e._h)return!1;for(var t,o=e._a||e._c,n=0;o.length>n;)if(t=o[n++],t.fail||!O(t.promise))return!1;return!0},j=function(e){_.call(s,function(){var t;k?I.emit('rejectionHandled',e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},w=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),L(t,!0))},H=function(e){var t,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===e)throw E('Promise can\'t be resolved itself');(t=R(e))?g(function(){var n={_w:o,_d:!1};try{t.call(e,d(H,n,1),d(w,n,1))}catch(t){w.call(n,t)}}):(o._v=e,o._s=1,L(o,!1))}catch(t){w.call({_w:o,_d:!1},t)}}};T||(A=function(e){y(this,A,x,'_h'),m(e),n.call(this);try{e(d(H,this,1),d(w,this,1))}catch(e){w.call(this,e)}},n=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=o(42)(A.prototype,{then:function(e,t){var o=P(v(this,A));return o.ok='function'!=typeof e||e,o.fail='function'==typeof t&&t,o.domain=k?I.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&L(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new n;this.promise=e,this.resolve=d(H,e,1),this.reject=d(w,e,1)},f.f=P=function(e){return e===A||e===l?new r(e):a(e)}),u(u.G+u.W+u.F*!T,{Promise:A}),o(43)(A,x),o(44)(x),l=o(6)[x],u(u.S+u.F*!T,x,{reject:function(e){var t=P(this),o=t.reject;return o(e),t.promise}}),u(u.S+u.F*(i||!T),x,{resolve:function(e){return C(i&&this===l?A:this,e)}}),u(u.S+u.F*!(T&&o(45)(function(e){A.all(e)['catch'](S)})),x,{all:function(e){var t=this,o=P(t),n=o.resolve,a=o.reject,r=b(function(){var o=[],r=0,l=1;h(e,!1,function(e){var i=r++,s=!1;o.push(void 0),l++,t.resolve(e).then(function(e){s||(s=!0,o[i]=e,--l||n(o))},a)}),--l||n(o)});return r.e&&a(r.v),o.promise},race:function(e){var t=this,o=P(t),n=o.reject,a=b(function(){h(e,!1,function(e){t.resolve(e).then(o.resolve,n)})});return a.e&&n(a.v),o.promise}})},function(e){e.exports=!1},function(e,t,o){var n=o(0),a='__core-js_shared__',r=n[a]||(n[a]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t,o){var n=o(0),a=o(6),r=o(13),l=o(16),i=o(4),s='prototype',d=function(e,t,o){var p,u,c,m,y=e&d.F,h=e&d.G,v=e&d.S,_=e&d.P,g=e&d.B,f=h?n:v?n[t]||(n[t]={}):(n[t]||{})[s],b=h?a:a[t]||(a[t]={}),x=b[s]||(b[s]={});for(p in h&&(o=t),o)u=!y&&f&&void 0!==f[p],c=(u?f:o)[p],m=g&&u?i(c,n):_&&'function'==typeof c?i(Function.call,c):c,f&&l(f,p,c,e&d.U),b[p]!=c&&r(b,p,m),_&&x[p]!=c&&(x[p]=c)};n.core=a,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},function(e,t,o){e.exports=!o(7)&&!o(14)(function(){return 7!=Object.defineProperty(o(15)('div'),'a',{get:function(){return 7}}).a})},function(e,t,o){var n=o(3);e.exports=function(e,t){if(!n(e))return e;var o,a;if(t&&'function'==typeof(o=e.toString)&&!n(a=o.call(e)))return a;if('function'==typeof(o=e.valueOf)&&!n(a=o.call(e)))return a;if(!t&&'function'==typeof(o=e.toString)&&!n(a=o.call(e)))return a;throw TypeError('Can\'t convert object to primitive value')}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){e.exports=function(e,t,o,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(o+': incorrect invocation!');return e}},function(e,t,o){var n=o(4),a=o(31),r=o(32),l=o(2),i=o(33),s=o(35),d={},p={},t=e.exports=function(e,t,o,u,c){var m,y,h,v,_=c?function(){return e}:s(e),g=n(o,u,t?2:1),f=0;if('function'!=typeof _)throw TypeError(e+' is not iterable!');if(r(_)){for(m=i(e.length);m>f;f++)if(v=t?g(l(y=e[f])[0],y[1]):g(e[f]),v===d||v===p)return v;}else for(h=_.call(e);!(y=h.next()).done;)if(v=a(h,g,y.value,t),v===d||v===p)return v};t.BREAK=d,t.RETURN=p},function(e,t,o){var n=o(2);e.exports=function(t,e,o,a){try{return a?e(n(o)[0],o[1]):e(o)}catch(o){var r=t['return'];throw void 0!==r&&n(r.call(t)),o}}},function(e,t,o){var n=o(18),a=o(1)('iterator'),r=Array.prototype;e.exports=function(e){return e!==void 0&&(n.Array===e||r[a]===e)}},function(e,t,o){var n=o(34),a=Math.min;e.exports=function(e){return 0<e?a(n(e),9007199254740991):0}},function(e){var t=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?o:t)(e)}},function(e,t,o){var n=o(11),a=o(1)('iterator'),r=o(18);e.exports=o(6).getIteratorMethod=function(e){if(e!=void 0)return e[a]||e['@@iterator']||r[n(e)]}},function(e,t,o){var n=o(2),a=o(5),r=o(1)('species');e.exports=function(e,t){var o,l=n(e).constructor;return l===void 0||(o=n(l)[r])==void 0?t:a(o)}},function(e){e.exports=function(e,t,o){var n=o===void 0;switch(t.length){case 0:return n?e():e.call(o);case 1:return n?e(t[0]):e.call(o,t[0]);case 2:return n?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3]);}return e.apply(o,t)}},function(e,t,o){var n=o(0).document;e.exports=n&&n.documentElement},function(e,t,o){var n=o(0),a=o(19).set,r=n.MutationObserver||n.WebKitMutationObserver,l=n.process,i=n.Promise,s='process'==o(8)(l);e.exports=function(){var t,o,d,e=function(){var e,n;for(s&&(e=l.domain)&&e.exit();t;){n=t.fn,t=t.next;try{n()}catch(n){throw t?d():o=void 0,n}}o=void 0,e&&e.enter()};if(s)d=function(){l.nextTick(e)};else if(r){var p=!0,u=document.createTextNode('');new r(e).observe(u,{characterData:!0}),d=function(){u.data=p=!p}}else if(i&&i.resolve){var c=i.resolve();d=function(){c.then(e)}}else d=function(){a.call(n,e)};return function(e){var n={fn:e,next:void 0};o&&(o.next=n),t||(t=n,d()),o=n}}},function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,o){var n=o(2),a=o(3),r=o(20);e.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var o=r.f(e),l=o.resolve;return l(t),o.promise}},function(e,t,o){var n=o(16);e.exports=function(e,t,o){for(var a in t)n(e,a,t[a],o);return e}},function(e,t,o){var n=o(9).f,a=o(17),r=o(1)('toStringTag');e.exports=function(e,t,o){e&&!a(e=o?e:e.prototype,r)&&n(e,r,{configurable:!0,value:t})}},function(e,t,o){'use strict';var n=o(0),a=o(9),r=o(7),l=o(1)('species');e.exports=function(e){var t=n[e];r&&t&&!t[l]&&a.f(t,l,{configurable:!0,get:function(){return this}})}},function(e,t,o){var n=o(1)('iterator'),a=!1;try{var r=[7][n]();r['return']=function(){a=!0},Array.from(r,function(){throw 2})}catch(t){}e.exports=function(e,t){if(!t&&!a)return!1;var o=!1;try{var r=[7],l=r[n]();l.next=function(){return{done:o=!0}},r[n]=function(){return l},e(r)}catch(t){}return o}},function(e,t,o){'use strict';o(47),o(53)},function(e,t,o){'use strict';var n=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,'__esModule',{value:!0}),o(48);var a,r=o(49),l=o(50),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),Drupal.attachBehaviors(t)},t.prototype.initNoBehaviors=function(t){e.prototype.init.call(this,t)},t}(l.State);Drupal.behaviors.Layout={attach:function(e,t){t.layout||(t.layout={}),a||(a=new i(new r.AjaxLayoutHandler(t.basePath,t.layout.destination))),a.initNoBehaviors(e)}}},function(){'use strict'},function(e,t,o){'use strict';var n=function(e,t,o,n){return new(o||(o=Promise))(function(a,r){function l(e){try{s(n.next(e))}catch(t){r(t)}}function i(e){try{s(n['throw'](e))}catch(t){r(t)}}function s(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(l,i)}s((n=n.apply(e,t||[])).next())})},a=function(e,o){function n(e){return function(t){return a([e,t])}}function a(n){if(r)throw new TypeError('Generator is already executing.');for(;d;)try{if(r=1,l&&(i=l[2&n[0]?'return':n[0]?'throw':'next'])&&!(i=i.call(l,n[1])).done)return i;switch((l=0,i)&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return d.label++,{value:n[1],done:!1};case 5:d.label++,l=n[1],n=[0];continue;case 7:n=d.ops.pop(),d.trys.pop();continue;default:if((i=d.trys,!(i=0<i.length&&i[i.length-1]))&&(6===n[0]||2===n[0])){d=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){d.label=n[1];break}if(6===n[0]&&d.label<i[1]){d.label=i[1],i=n;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(n);break}i[2]&&d.ops.pop(),d.trys.pop();continue;}n=o.call(e,d)}catch(t){n=[6,t],l=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,l,i,s,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,'__esModule',{value:!0});var r,l=o(10);(function(e){e.Add='layout/ajax/add-item',e.AddColumn='layout/ajax/add-column',e.AddColumnContainer='layout/ajax/add-column-container',e.GetAllowedStyles='layout/ajax/get-styles',e.Move='layout/ajax/move',e.Remove='layout/ajax/remove',e.Render='layout/ajax/render',e.SetStyle='layout/ajax/set-style'})(r||(r={}));var i=function(){function e(e,t){this.baseUrl=e,this.destination=t}return e.prototype.buildFormData=function(e){var t=new FormData;for(var o in e)t.append(o,e[o]);return t},e.prototype.request=function(e,t){var o=this;return new Promise(function(n,a){var r=new XMLHttpRequest;r.open('POST',o.baseUrl+e),r.setRequestHeader('X-Requested-With','XMLHttpRequest'),r.addEventListener('load',function(){200===this.status?n(r):a(this.status+': '+this.statusText)}),r.addEventListener('error',function(){a(this.status+': '+this.statusText)}),r.send(o.buildFormData(t))})},e.prototype.createElementFromResponse=function(e){var t=JSON.parse(e.responseText);if(!t||!t.success||!t.output)throw e.status+': '+e.statusText+': got invalid response data';var o=document.createElement('div');if(o.innerHTML=t.output,!(o.firstElementChild instanceof Element))throw e.status+': '+e.statusText+': got invalid response html output';return o.firstElementChild},e.prototype.debug=function(e){console.log('layout error: '+e)},e.prototype.addColumn=function(e,t,o,l){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return[4,this.request(r.AddColumn,{token:e,layout:t,containerId:o,position:l||0,destination:this.destination})];case 1:return n=a.sent(),[2,this.createElementFromResponse(n)];}})})},e.prototype.addColumnContainer=function(e,t,o,i,s,d){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return[4,this.request(r.AddColumnContainer,{token:e,layout:t,containerId:o,position:i,columnCount:s||2,style:d||l.Item.DefaultStyle,destination:this.destination})];case 1:return n=a.sent(),[2,this.createElementFromResponse(n)];}})})},e.prototype.addItem=function(e,t,o,i,s,d,p){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return[4,this.request(r.Add,{token:e,layout:t,containerId:o,itemType:i,itemId:s,position:d,style:p||l.Item.DefaultStyle,destination:this.destination})];case 1:return n=a.sent(),[2,this.createElementFromResponse(n)];}})})},e.prototype.getAllowedStyles=function(e,t,o){return n(this,void 0,void 0,function(){var n,l;return a(this,function(a){switch(a.label){case 0:return[4,this.request(r.GetAllowedStyles,{token:e,layout:t,itemId:o,destination:this.destination})];case 1:if(n=a.sent(),l=JSON.parse(n.responseText),!l||!l.success||!l.styles)throw n.status+': '+n.statusText+': got invalid response data';return[2,l.styles];}})})},e.prototype.moveItem=function(e,t,o,l,i){return n(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return[4,this.request(r.Move,{token:e,layout:t,containerId:o,itemId:l,newPosition:i,destination:this.destination})];case 1:return n.sent(),[2];}})})},e.prototype.removeItem=function(e,t,o){return n(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return[4,this.request(r.Remove,{token:e,layout:t,itemId:o,destination:this.destination})];case 1:return n.sent(),[2];}})})},e.prototype.renderItem=function(e,t,o){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return[4,this.request(r.Render,{token:e,layout:t,itemId:o,destination:this.destination})];case 1:return n=a.sent(),[2,this.createElementFromResponse(n)];}})})},e.prototype.setStyle=function(e,t,o,l){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return[4,this.request(r.SetStyle,{token:e,layout:t,itemId:o,style:l||null,destination:this.destination})];case 1:return n=a.sent(),[2,this.createElementFromResponse(n)];}})})},e}();t.AjaxLayoutHandler=i},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=o(10),a=o(51),r=function(){function e(e){var t=this;this.containers=[],this.handler=e,this.drake=dragula({copy:function(e,t){try{return n.getContainer(t).readonly||n.getItem(e).readonly}catch(e){return!1}},accepts:function(e,t){try{return!n.getContainer(t).readonly}catch(e){return!1}},invalid:function(e){for(var t=e;t;){if(t.hasAttribute('data-menu'))return!0;if(t.hasAttribute('data-item-id'))return!1;if(!t.parentElement)break;t=t.parentElement}return!0},revertOnSpill:!0,removeOnSpill:!1,direction:'vertical'}),this.drake.on('drop',function(e,o,n,a){t.onDrop(e,o,n,a)}),this.drake.on('over',function(e,o){t.onOver(e,o)})}return e.prototype.remove=function(e){var t=this.drake.containers.indexOf(e);-1!==t&&this.drake.containers.splice(t),e.parentElement&&e.parentElement.removeChild(e)},e.prototype.cancel=function(e,t){e&&this.handler.debug(e),t&&t.remove(),this.drake.cancel(!0)},e.prototype.onOver=function(e){e instanceof HTMLElement&&(e.style.cssFloat='none')},e.prototype.onDrop=function(e,t){var o=this;try{var a=n.getContainer(t),r=n.getItem(e);if(a.readonly)throw'container is readonly';r.readonly?this.handler.addItem(a.token,a.layoutId,a.id,r.type,r.id,r.getPosition()).then(function(t){e.parentElement.replaceChild(t,e),o.initItem(t,a),o.init(t)}).catch(function(t){o.cancel(t,e)}):this.handler.moveItem(a.token,a.layoutId,a.id,r.id,r.getPosition()).catch(function(t){o.cancel(t,e)})}catch(e){this.cancel(e)}},e.prototype.init=function(e){this.collectLayouts(e),this.collectSources(e)},e.prototype.initContainer=function(e,t){if(!e.hasAttribute('droppable')&&e.hasAttribute('data-container')&&e.hasAttribute('data-id')){e.setAttribute('data-token',t.token),e.setAttribute('data-layout-id',t.layoutId);var o=n.getContainer(e);o.type!==n.ContainerType.Horizontal&&(e.setAttribute('droppable','1'),this.drake.containers.push(o.element)),this.collectItems(o),a.createMenu(this,o)}},e.prototype.initItem=function(e){if(!e.hasAttribute('draggable')&&e.hasAttribute('data-item-id')){var t=n.getItem(e);e.setAttribute('draggable','1'),t.readonly||a.createMenu(this,t)}},e.prototype.collectSources=function(e){for(var t,o=0,n=e.querySelectorAll('[data-layout-source]');o<n.length;o++)t=n[o],this.drake.containers.push(t)},e.prototype.collectItems=function(e){for(var t,o=0,n=e.element.childNodes;o<n.length;o++)t=n[o],t instanceof Element&&(t.hasAttribute('data-item-id')?this.initItem(t,e):this.initContainer(t,e))},e.prototype.collectLayouts=function(e){for(var t,o=0,r=e.querySelectorAll('[data-layout]');o<r.length;o++)if(t=r[o],t.hasAttribute('data-token')&&t.hasAttribute('data-id')){var l=n.getContainer(t);t.setAttribute('droppable','1'),this.drake.containers.push(l.element),this.collectItems(l),a.createMenu(this,l)}},e}();t.State=r},function(e,t,o){'use strict';function n(e){if(y.length)for(var t,o=0,n=y;o<n.length;o++)t=n[o],e.target instanceof Node&&t.element.contains(e.target)||t.close()}function a(){if(y.length)for(var e,t=0,o=y;t<o.length;t++)e=o[t],e.close()}function r(e,t,o,n){var r=document.createElement('li'),l=document.createElement('a');return l.setAttribute('href','#'),l.setAttribute('role','button'),o&&(l.innerHTML+=m.replace('__GLYPH__',o)),l.innerHTML+=t,l.addEventListener('click',function(t){t.preventDefault(),t.stopPropagation(),a(),n(t).then(function(){}).catch(function(t){e.handler.debug(t)})}),r.appendChild(l),r}function l(){var e=document.createElement('li');return e.setAttribute('class','divider'),e.setAttribute('role','separator'),e}function i(e,t){var o=[],n=t.getParentContainer();return o.push(r(e,'Change style','wrench',function(o){var a,r=!1;return e.handler.getAllowedStyles(n.token,n.layoutId,t.id).then(function(l){var i=document.createElement('form'),s=document.createElement('select');i.appendChild(s);var d=!1;for(var p in l){var m=document.createElement('option');m.value=p,m.innerHTML=l[p],s.appendChild(m),p===u.Item.DefaultStyle&&(d=!0)}if(!d){var m=document.createElement('option');m.value=u.Item.DefaultStyle,m.innerHTML='Default',s.insertBefore(m,s.firstElementChild)}s.addEventListener('change',function(){a=s.value,r=!0}),c.createModal('Set style',i,o.pageX,o.pageY).then(function(){if(r)return e.handler.setStyle(n.token,n.layoutId,t.id,a).then(function(o){t.element.parentElement.replaceChild(o,t.element),e.init(o),e.initItem(o,n)})})})})),o.push(l()),o.push(r(e,'Remove','remove',function(){return e.handler.removeItem(n.token,n.layoutId,t.id).then(function(){e.remove(t.element)})})),o}function s(e,t){var o=[r(e,'Add column to left','chevron-left',function(){return e.handler.addColumn(t.token,t.layoutId,t.id,0).then(function(o){t.element.insertBefore(o,t.element.firstChild),e.init(o),e.initContainer(o,t)})}),r(e,'Add column to right','chevron-right',function(){var o=u.getContainerCount(t.element);return e.handler.addColumn(t.token,t.layoutId,t.id,o).then(function(o){t.element.appendChild(o),e.init(o),e.initContainer(o,t)})}),l(),r(e,'Remove','remove',function(){return e.handler.removeItem(t.token,t.layoutId,t.id).then(function(){e.remove(t.element)})})];return o}function d(e,t){var o=[l(),r(e,'Add columns to top','columns',function(){return e.handler.addColumnContainer(t.token,t.layoutId,t.id,0).then(function(o){t.element.insertBefore(o,t.element.firstChild),e.init(o),e.initContainer(o,t)})}),r(e,'Add columns to bottom','columns',function(){var o=u.getContainerCount(t.element);return e.handler.addColumn(t.token,t.layoutId,t.id,o).then(function(o){t.element.appendChild(o),e.init(o),e.initContainer(o,t)})}),l()];return o}function p(e,t){var o=d(e,t),n=t.getParentContainer();return o.push(l()),o.push(r(e,'Add column before','chevron-left',function(){return e.handler.addColumn(n.token,n.layoutId,n.id,t.getPosition()).then(function(o){n.element.insertBefore(o,t.element),e.init(o),e.initContainer(o,n)})})),o.push(r(e,'Add column after','chevron-right',function(){return e.handler.addColumn(n.token,n.layoutId,n.id,t.getPosition()+1).then(function(o){n.element.insertBefore(o,t.element.nextSibling),e.init(o),e.initContainer(o,n)})})),o.push(l()),o.push(r(e,'Remove this column','remove',function(){return e.handler.removeItem(t.token,t.layoutId,t.id).then(function(){e.remove(t.element)})})),o}Object.defineProperty(t,'__esModule',{value:!0});var u=o(10),c=o(52),m='<span class="fa fa-__GLYPH__" aria-hidden="true"></span> ',y=[],h=!1,v=function(){function e(e,t){var o=this;this.item=e,this.element=t,this.master=t.querySelector('a'),this.master.addEventListener('dblclick',function(e){e.stopPropagation(),o.item.toggleCollapse()}),this.master.addEventListener('click',function(e){e.preventDefault(),o.open()})}return e.prototype.close=function(){var e=this.element.querySelector('ul');e&&(e.style.display='none')},e.prototype.open=function(){var e=this.element.querySelector('ul');e&&(e.style.display='block')},e}();t.createMenu=function(e,t){var o=[],a='Error',r=!1;t instanceof u.Container?t.type===u.ContainerType.Column?(a='Column',o=p(e,t)):t.type===u.ContainerType.Horizontal?(a='Columns container',o=s(e,t),r=!0):(a='Layout',o=d(e,t)):(a='Item',o=i(e,t),r=!0);var l='<div class="layout-menu" data-menu="1">\n  <a role="button" href="#" title="Click to open, double-click to expand/hide content">\n    <span class="fa fa-cog" aria-hidden="true"></span>\n    <span class="title">__TITLE__</span>\n  </a>\n  <ul></ul>\n</div>'.replace(/__TITLE__/g,a).replace('__LINKS__','<li><a>coucou</a></href>'),c=document.createElement('div');c.innerHTML=l;for(var m,_=c.firstElementChild,g=_.querySelector('ul'),f=0,b=o;f<b.length;f++)m=b[f],g.appendChild(m);h||(document.addEventListener('click',function(e){n(e)}),h=!0),y.push(new v(t,_)),t.element.insertBefore(_,t.element.firstChild)}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.createModal=function(e,t,o,n){return new Promise(function(a){var r=document.createElement('div');r.innerHTML='<div class="layout-modal" tabindex="-1" role="dialog">\n  <div role="document">\n    <button name="close" type="button" aria-label="Close">\n      <span aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title">__TITLE__</h4>\n    <div id="content"></div>\n  </div>\n</div>'.replace(/__TITLE__/g,e);var l=r.firstElementChild,i=l.querySelector('#content');i.parentElement.replaceChild(t,i),document.body.appendChild(l),l.style.display='block',l.style.position='absolute',l.style.left=o.toString()+'px',l.style.top=n.toString()+'px',l.style.transform='translate(-50%, -50%)',l.classList.add('open'),l.querySelector('button[name=close]').addEventListener('click',function(e){e.preventDefault(),l.remove(),a()})})}},function(){}]);
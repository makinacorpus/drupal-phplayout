<?php
/**
 * PHP Layout Drupal module hook definitions and module placeholder.
 */

use MakinaCorpus\Drupal\Layout\Storage\Layout;
use MakinaCorpus\Layout\Grid\Item;

/**
 * Layout edit token get parameter name
 */
const PHP_LAYOUT_TOKEN_PARAMETER = 'layout-edit';

/**
 * Implements hook_menu().
 */
function phplayout_menu() {
  $items = [];

  // Edit callbacks for AJAX/other.
  $items['layout/ajax/add-column'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::addColumn'],
  ];
  $items['layout/ajax/add-column-container'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::addColumnContainer'],
  ];
  $items['layout/ajax/add-item'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::add'],
  ];
  $items['layout/ajax/remove-column'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::removeColumn'],
  ];
  $items['layout/ajax/remove'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::remove'],
  ];

  // Add item form.
  $items['layout/callback/add-item'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::addItemForm'],
  ];

  // Add item node selection autocomplete callback.
  $items['layout/callback/node-autocomplete'] = [
    'page callback' => 'sf_dic_page',
    'page arguments' => ['php_layout.drupal_layout_controller::nodeAutocomplete'],
  ];

  return $items;
}

/**
 * Implements hook_page_build().
 */
function phplayout_page_build(&$page) {
  \Drupal::service('php_layout.drupal_page_injector')->inject(\Drupal::request(), $page);
}
